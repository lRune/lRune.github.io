<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Rune 在 Github 上的个人博客">
    <meta name="keyword" content="">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-person-128.png">
    <link rel="alternate" type="application/atom+xml" title="RuneSpace" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        Hexo主题开发｜RuneSpace&#39;s blog
        
    </title>

    <link rel="canonical" href="http://lrune.github.io/2021/01/29/Hexo主题开发/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/blog-style.css">


    <!-- Pygments Github CSS -->
    
<link rel="stylesheet" href="/css/syntax.css">

<meta name="generator" content="Hexo 5.3.0"></head>

<style>

    header.intro-header {
        background-image: url('//o7bkkhiex.bkt.clouddn.com/lion-blur-bg.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    RuneSpace
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/Categories/">Categories</a>
                        </li>
							
						
                    
                        
							
								
							
						
                    
                        
							
                        <li>
                            <a href="/tags/">tags</a>
                        </li>
							
						
                    
					
					
						<li>
							<a href="/about">About</a>
						</li>
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="nullhttps://cutewallpaper.org/21/wallpaper-digital-art/BladeRunner-Digital-Art-4K-wallpaper.jpg">


<style>
    
    header.intro-header {
        background-image: url('https://cutewallpaper.org/21/wallpaper-digital-art/BladeRunner-Digital-Art-4K-wallpaper.jpg?imageView2/1/w/1400/h/400/interlace/1/q/90')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>Hexo主题开发</h1>
                    
                    <span class="meta">
                         作者 ﹏猴子请来的救兵
                        <span>
                          日期 2021-01-29
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#Hexo"
                           title="Hexo">Hexo</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            Hexo主题开发
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <h1 id="Hexo-主题开发"><a href="#Hexo-主题开发" class="headerlink" title="Hexo 主题开发"></a>Hexo 主题开发</h1><hr>
<p>转自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yyhh/p/11058985.html">https://www.cnblogs.com/yyhh/p/11058985.html</a><br>作者：<a target="_blank" rel="noopener" href="https://home.cnblogs.com/u/yyhh/">﹏猴子请来的救兵</a></p>
<h2 id="序章"><a href="#序章" class="headerlink" title="序章"></a>序章</h2><p>想要一个自己的知识管理系统，用了 Hexo ，但是没有发现自己心仪的主题，就自己做了一个。本文记录了制作的全过程。本人编码功底和前端知识并不是特别雄厚，希望能由此文引出各路大神的兴趣，以后制作出更多优秀的主题。</p>
<p>预览： <a target="_blank" rel="noopener" href="https://itabyss.github.io/">https://itabyss.github.io/</a></p>
<p>源码： <a target="_blank" rel="noopener" href="https://github.com/ITAbyss/hexo-wiki">https://github.com/ITAbyss/hexo-wiki</a></p>
<p>教程文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yyhh/p/11058985.html">https://www.cnblogs.com/yyhh/p/11058985.html</a></p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620151931058-1030949664.png" alt="img"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Hexo 是一款能将『 Markdown 』文件编译成『 html 』静态文件，可以提供『 Web 』服务，做『 Blog 』，使其能部署到『 gitpage 』上等等。首先要安装『 <a target="_blank" rel="noopener" href="https://nodejs.org/">node.js</a> 』，安装好了以后，就可以使用『 npm 』来安装了，可能会读取系统配置文件，所以需要给『 root 』权限，使用『 sodu 』执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/hexo -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/hexo-cli/bin/hexo</span><br><span class="line"></span><br><span class="line">&gt; fsevents@1.2.4 install /usr/<span class="built_in">local</span>/lib/node_modules/hexo-cli/node_modules/fsevents</span><br><span class="line">&gt; node install</span><br><span class="line"></span><br><span class="line">[fsevents] Success: <span class="string">&quot;/usr/local/lib/node_modules/hexo-cli/node_modules/fsevents/lib/binding/Release/node-v57-darwin-x64/fse.node&quot;</span> already installed</span><br><span class="line">Pass --update-binary to reinstall or --build-from-source to recompile</span><br><span class="line">+ hexo-cli@1.1.0</span><br><span class="line">added 171 packages <span class="keyword">in</span> 6.255s</span><br></pre></td></tr></table></figure>
<p>这个时候可以测试以下，是否安装成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo -version</span><br><span class="line">hexo-cli: 1.1.0</span><br><span class="line">os: Darwin 17.6.0 darwin x64</span><br><span class="line">http_parser: 2.8.0</span><br><span class="line">node: 8.11.3</span><br><span class="line">v8: 6.2.414.54</span><br><span class="line">uv: 1.19.1</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">ares: 1.10.1-DEV</span><br><span class="line">modules: 57</span><br><span class="line">nghttp2: 1.32.0</span><br><span class="line">napi: 3</span><br><span class="line">openssl: 1.0.2o</span><br><span class="line">icu: 60.1</span><br><span class="line">unicode: 10.0</span><br><span class="line">cldr: 32.0</span><br><span class="line">tz: 2017c</span><br></pre></td></tr></table></figure>


<h2 id="新建-Blog"><a href="#新建-Blog" class="headerlink" title="新建 Blog"></a>新建 Blog</h2><p>新建一个目录，来搭建一个简易的『 Blog 』吧。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir ~/hexo-blog</span><br><span class="line">$ <span class="built_in">cd</span> ~/hexo-blog</span><br><span class="line">$ hexo init</span><br><span class="line">INFO  Cloning hexo-starter to ~/hexo-blog</span><br><span class="line">Cloning into <span class="string">&#x27;/Users/wywk/hexo-blog&#x27;</span>...</span><br><span class="line">remote: Counting objects: 65, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 65 (delta 0), reused 0 (delta 0), pack-reused 65</span><br><span class="line">Unpacking objects: 100% (65/65), <span class="keyword">done</span>.</span><br><span class="line">Submodule <span class="string">&#x27;themes/landscape&#x27;</span> (https://github.com/hexojs/hexo-theme-landscape.git) registered <span class="keyword">for</span> path <span class="string">&#x27;themes/landscape&#x27;</span></span><br><span class="line">Cloning into <span class="string">&#x27;/Users/wywk/hexo-blog/themes/landscape&#x27;</span>...</span><br><span class="line">remote: Counting objects: 824, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 824 (delta 0), reused 0 (delta 0), pack-reused 823</span><br><span class="line">Receiving objects: 100% (824/824), 2.54 MiB | 1.01 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (435/435), <span class="keyword">done</span>.</span><br><span class="line">Submodule path <span class="string">&#x27;themes/landscape&#x27;</span>: checked out <span class="string">&#x27;73a23c51f8487cfcd7c6deec96ccc7543960d350&#x27;</span></span><br><span class="line">INFO  Install dependencies</span><br><span class="line">npm WARN deprecated titlecase@1.1.2: no longer maintained</span><br><span class="line"></span><br><span class="line">&gt; fsevents@1.2.4 install /Users/wywk/hexo-blog/node_modules/fsevents</span><br><span class="line">&gt; node install</span><br><span class="line"></span><br><span class="line">[fsevents] Success: <span class="string">&quot;/Users/wywk/hexo-blog/node_modules/fsevents/lib/binding/Release/node-v57-darwin-x64/fse.node&quot;</span> already installed</span><br><span class="line">Pass --update-binary to reinstall or --build-from-source to recompile</span><br><span class="line"></span><br><span class="line">&gt; nunjucks@3.1.3 postinstall /Users/wywk/hexo-blog/node_modules/nunjucks</span><br><span class="line">&gt; node postinstall-build.js src</span><br><span class="line"></span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">added 470 packages <span class="keyword">in</span> 20.978s</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure>
<p>初始化之后，看到如上信息，说明已经初始化成功了。接下来，直接启动服务，就可以大致浏览『 Blog 』了。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/hexo-blog</span><br><span class="line">$ hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>启动后，访问『 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> 』</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620151942622-113171933.png" alt="img"></p>
<p>当然也可以使用一些其他的命令，可以通过帮助来查看</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo <span class="built_in">help</span></span><br><span class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  clean     Remove generated files and cache.</span><br><span class="line">  config    Get or <span class="built_in">set</span> configurations.</span><br><span class="line">  deploy    Deploy your website.</span><br><span class="line">  generate  Generate static files.</span><br><span class="line">  <span class="built_in">help</span>      Get <span class="built_in">help</span> on a <span class="built_in">command</span>.</span><br><span class="line">  init      Create a new Hexo folder.</span><br><span class="line">  list      List the information of the site</span><br><span class="line">  migrate   Migrate your site from other system to Hexo.</span><br><span class="line">  new       Create a new post.</span><br><span class="line">  publish   Moves a draft post from _drafts to _posts folder.</span><br><span class="line">  render    Render files with renderer plugins.</span><br><span class="line">  server    Start the server.</span><br><span class="line">  version   Display version information.</span><br><span class="line"></span><br><span class="line">Global Options:</span><br><span class="line">  --config  Specify config file instead of using _config.yml</span><br><span class="line">  --cwd     Specify the CWD</span><br><span class="line">  --debug   Display all verbose messages <span class="keyword">in</span> the terminal</span><br><span class="line">  --draft   Display draft posts</span><br><span class="line">  --safe    Disable all plugins and scripts</span><br><span class="line">  --silent  Hide output on console</span><br></pre></td></tr></table></figure>


<h2 id="主题下载"><a href="#主题下载" class="headerlink" title="主题下载"></a>主题下载</h2><p>Hexo 有很多精彩的主题，可以去『 <a target="_blank" rel="noopener" href="https://hexo.io/themes/">官方主题网站</a> 』去查阅，找到自己喜欢的主题。</p>
<p>这次所写是自己基于Hexo的框架，编写一个自己喜欢的主题。我个人喜欢极简快速的主题，所以不太喜欢花哨的、很多插件、很多挂件的那种，感觉加载起来特别的卡，可能是作为性能测试人员的坏毛病，喜欢追求极致的速度。没有找到自己喜欢的极简风格，所以就自己写了一个简单的 wiki ，用于代替云笔记。</p>
<h2 id="主题开发"><a href="#主题开发" class="headerlink" title="主题开发"></a>主题开发</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>首先得创建一个自己 Blog 的文件夹，我这边建的文件夹叫『 wiki 』，然后在这个文件夹下，进行 Hexo 的初始化。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir wiki</span><br><span class="line"><span class="built_in">cd</span> wiki</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p>初始化之后就会有一个这样的目录。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wiki ➔  tree -L 1</span><br><span class="line">.</span><br><span class="line">├── _config.yml       // 总体的配置文件</span><br><span class="line">├── node_modules      // NodeJs 所依赖的包，后期也可以自己添加插件</span><br><span class="line">├── package-lock.json // 支持 hexo 运行的 NodeJs 包</span><br><span class="line">├── package.json      // 自定义的 NodeJs 包</span><br><span class="line">├── scaffolds         // Hexo Markdown 加载时的关键字，如data,title等,它会在启动的时候默认加载</span><br><span class="line">├── <span class="built_in">source</span>            // md 源文件目录</span><br><span class="line">└── themes            // 主题文件夹</span><br><span class="line">    └── landscape     // 默认主题        </span><br></pre></td></tr></table></figure>
<p>我们编写 md 文档放在 『source』文件夹中，在运行『hexo generate』的时候，会根据『source』目录中的 md 文件自动生成一组 『html』格式的静态文件组，会在wiki目录下新建一个 『public』目录，存放在其中。</p>
<p>在『_config.yml』中的 73 行左右，可以看到配置的默认主题『theme: landscape』,所对应的是 themes 目录下的 landscape 目录。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span></span><br></pre></td></tr></table></figure>
<p>在『themes』目录下，新建一个自己的主题『wiki』，并且新建一些可以支持运行的文件与目录，按照如下目录格式创建，里面可以不写东西，下面写有注释的，就是我新建的文件。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wiki ➔  tree -L 1</span><br><span class="line">.</span><br><span class="line">├── _config.yml                 </span><br><span class="line">├── node_modules                </span><br><span class="line">├── package-lock.json        </span><br><span class="line">├── package.json                </span><br><span class="line">├── scaffolds                        </span><br><span class="line">├── <span class="built_in">source</span>                            </span><br><span class="line">└── themes                            </span><br><span class="line">    ├── landscape</span><br><span class="line">    └── wiki                // 自建的主题目录</span><br><span class="line">        ├── _config.yml     // 主题配置文件</span><br><span class="line">        ├── layout          // 主要构造 html 的模板</span><br><span class="line">        │   ├── index.ejs   // 主页模板</span><br><span class="line">        │   ├── layout.ejs  // 布局模板</span><br><span class="line">        │   └── post.ejs    // md 编译成 html 后的文件模板</span><br><span class="line">        └── <span class="built_in">source</span>          // 静态资源文件目录</span><br><span class="line">            ├── css         // css 样式目录</span><br><span class="line">            └── js          // JavaScript 脚本目录</span><br></pre></td></tr></table></figure>
<p>在『_config.yml』中 73 行左右修改主题，指向刚创建的 wiki 目录。</p>
<p>这里的『_config.yml』指的是 Hexo 的配置文件。</p>
<p>后面如果要修改主题的配置文件，全部都会叫做 『themes._config.yml』。</p>
<p>想要了解更加详细的资料可以去查阅<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration">官网配置详解</a></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="comment">## theme: landscape</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">wiki</span></span><br></pre></td></tr></table></figure>
<p>在 wiki 目录下，启动 hexo 进行测试</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可以使用 hexo server 也可以直接简写 hexo s</span></span><br><span class="line">hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>访问 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/</a></p>
<p>可以看到一个白色的界面</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620151955999-1464232325.png" alt="img"></p>
<h3 id="模块介绍"><a href="#模块介绍" class="headerlink" title="模块介绍"></a>模块介绍</h3><p>为了测试该界面，分别在刚刚新建的 layout.ejs、index.ejs、post.ejs 中加些文字。</p>
<p>『layout.ejs』 这个文件是用于布局的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">这里是 layout.ejs</span><br></pre></td></tr></table></figure>
<p>『index.ejs』 这个文件是用于主页的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">这里是 index.ejs</span><br></pre></td></tr></table></figure>
<p>『post.ejs』 这个文件是用于文章的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">这里是 post.ejs</span><br></pre></td></tr></table></figure>
<p>刷新 <a target="_blank" rel="noopener" href="http://localhost:4000/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%9C%89%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E3%80%82">http://localhost:4000/，可以看到有中文乱码。</a></p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152000477-411265650.png" alt="img"></p>
<p>在 『layout.ejs』加上 html 代码，加上 utf-8 编码显示。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    这里是 layout.ejs</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>重启 hexo 服务 【注意: 这次要重启，还是乱码的请重启】</p>
<p>重启好了再刷新 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/</a></p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152004943-1360260387.png" alt="img"></p>
<p>可以发现 layout.ejs 给默认展示出来了，但是 index.ejs 和 post.ejs 呢？</p>
<p>可以用 ejs 引入代码，将这两个模板给引入</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    这里是 layout.ejs</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;index.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;post.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152009394-1616654742.png" alt="img"></p>
<h3 id="EJS-标签"><a href="#EJS-标签" class="headerlink" title="EJS 标签"></a>EJS 标签</h3><p>这里简单介绍一下 ejs 语法，介绍几个用的到的标签也是就好了。想要了解更加详细的资料可以查阅 <a target="_blank" rel="noopener" href="https://ejs.bootcss.com/">EJS文档</a>。</p>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;%</td>
<td align="left">脚本标签，用于流程控制</td>
</tr>
<tr>
<td align="left">&lt;%_</td>
<td align="left">删除前面的空格符</td>
</tr>
<tr>
<td align="left">&lt;%=</td>
<td align="left">输出数据到模板</td>
</tr>
<tr>
<td align="left">&lt;%-</td>
<td align="left">输出非转义数据到模板</td>
</tr>
<tr>
<td align="left">&lt;%#</td>
<td align="left">注释</td>
</tr>
<tr>
<td align="left">&lt;%%</td>
<td align="left">输出字符串『&lt;%』</td>
</tr>
<tr>
<td align="left">&gt;%</td>
<td align="left">脚本结束标签</td>
</tr>
<tr>
<td align="left">-%&gt;</td>
<td align="left">结束时，删除换行符</td>
</tr>
<tr>
<td align="left">_%&gt;</td>
<td align="left">结束时，删除空格符</td>
</tr>
<tr>
<td align="left">&lt;%- include(“index.ejs”) %&gt;</td>
<td align="left">引入其他模板</td>
</tr>
</tbody></table>
<p>上面代码就引入了各个 ejs 模板，可以更加方便用于模块开发。稍微测试一下</p>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    这里是 layout.ejs</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;index.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;post.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 一般在写逻辑的时候会用到这个标签，这个标签不会输出到页面上 --&gt;</span></span><br><span class="line">    &lt;%  %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 这个标签会输出到页面上，是带着非转义符号的 --&gt;</span></span><br><span class="line">    &lt;% </span><br><span class="line">        var test = &quot;基本上，就用这两组标签，其他的也用不上。&quot;;</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- test %&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152016362-1034019730.png" alt="img"></p>
<h3 id="Hexo-变量"><a href="#Hexo-变量" class="headerlink" title="Hexo 变量"></a>Hexo 变量</h3><p>再一个就是要介绍一下，<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/variables">Hexo Api</a> 我们会根据它提供的变量 api 来获取页面信息，进行 Blog 开发。同样介绍一下稍微常用的。</p>
<table>
<thead>
<tr>
<th align="left">变量</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">site</td>
<td align="left">总体变量，几乎都是从这里开始的</td>
</tr>
<tr>
<td align="left">site.posts</td>
<td align="left">所有文章</td>
</tr>
<tr>
<td align="left">site.posts[0].path</td>
<td align="left">文章路径，带日期的</td>
</tr>
<tr>
<td align="left">site.posts[0].slug</td>
<td align="left">文章路径，根据项目文件夹的路径来的</td>
</tr>
<tr>
<td align="left">site.posts[0]._id</td>
<td align="left">文章的唯一 id，后面会用于 active 对比</td>
</tr>
<tr>
<td align="left">site.posts[0].title</td>
<td align="left">文章的标题</td>
</tr>
<tr>
<td align="left">site.posts[0].date</td>
<td align="left">文章的时间</td>
</tr>
<tr>
<td align="left">page.date</td>
<td align="left">在直接访问文章路径下，文章的时间</td>
</tr>
<tr>
<td align="left">page.title</td>
<td align="left">在直接访问文章路径下，文章的标题</td>
</tr>
<tr>
<td align="left">page._id</td>
<td align="left">在直接访问文章路径下，文章的的唯一 id，后面会用于 active 对比</td>
</tr>
<tr>
<td align="left">page.content</td>
<td align="left">引入对应文章的正文</td>
</tr>
<tr>
<td align="left">config.xxx</td>
<td align="left">总体配置文件的引用 _config.yml</td>
</tr>
<tr>
<td align="left">theme.xxx</td>
<td align="left">主题配置文件 theme._config.yml</td>
</tr>
<tr>
<td align="left">&lt;%- body %&gt;</td>
<td align="left">同时引入 post.ejs 和 index.ejs</td>
</tr>
<tr>
<td align="left">&lt;%- css(path, …) %&gt;</td>
<td align="left">引入 css 文件</td>
</tr>
<tr>
<td align="left">&lt;%- js(path, …) %&gt;</td>
<td align="left">引入 js 文件</td>
</tr>
</tbody></table>
<p>同样是稍微的测试一下</p>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    这里是 layout.ejs</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;index.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- include(&quot;post.ejs&quot;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 一般在写逻辑的时候会用到这个标签，这个标签不会输出到页面上 --&gt;</span></span><br><span class="line">    &lt;%  %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 这个标签会输出到页面上，是带着非转义符号的 --&gt;</span></span><br><span class="line">    &lt;% </span><br><span class="line">        var test = &quot;基本上，就用这两组标签，其他的也用不上。&quot;;</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%- test %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;% site.posts.forEach(function(post)&#123; %&gt;</span><br><span class="line"></span><br><span class="line">        &lt;%- post.path %&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        &lt;%- post.slug %&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        &lt;%- post._id %&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        &lt;%- post.title %&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        &lt;%- post.date %&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&lt;%- post.path %&gt;&quot;</span>&gt;</span>&lt;%- post.title %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;% &#125;); %&gt;</span><br><span class="line">  </span><br><span class="line">![](https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152507609-296007299.png)</span><br><span class="line"></span><br><span class="line">  &lt;%- body %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152026766-274939183.png" alt="img"></p>
<p>可以看到，点击了这个 Hello World 的超链接，跳转过去，并没有看到任何信息，是因为在 post.ejs 中没有引入文章，所以没有信息，这个时候在 post.ejs 中引入文章</p>
<p>『post.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">这里是 post.ejs</span><br><span class="line"></span><br><span class="line">&lt;%- page.content %&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152030509-1216095051.png" alt="img"></p>
<p>这个时候访问主页的 Hello World 之后，就会访问文章的 url 了，此时也有文章出现了。</p>
<p>如果想要看变量里面都是什么东西，可以使用 js 的 console.log() 来查看，在控制台中查看</p>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;% console.log(site.posts) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="主题制作"><a href="#主题制作" class="headerlink" title="主题制作"></a>主题制作</h2><h3 id="主题布局"><a href="#主题布局" class="headerlink" title="主题布局"></a>主题布局</h3><p>说道这里，万事俱备，就可以正儿八经的开始做事了。我想要一个这样布局的 wiki</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152038579-1659913265.png" alt="img"></p>
<h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p>新建静态资源文件，并且放一下测试的 md 文件进 _posts 中，整个 wiki 的目录如下。主要添加了 theme.wiki.source 中的静态资源和已经布局用的 ejs</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wiki ➔  tree -N</span><br><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── db.json</span><br><span class="line">├── node_modules</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">│   └── _posts</span><br><span class="line">│       ├── Docker</span><br><span class="line">│       │   ├── 基础介绍</span><br><span class="line">│       │   │   ├── 01. 镜像.md</span><br><span class="line">│       │   │   ├── 02. 容器.md</span><br><span class="line">│       │   │   ├── 03. 数据.md</span><br><span class="line">│       │   │   ├── 04. 仓库.md</span><br><span class="line">│       │   │   ├── 05. 网络.md</span><br><span class="line">│       │   │   └── 06. Dockerfile.md</span><br><span class="line">│       │   └── 镜像部署</span><br><span class="line">│       │       ├── CentOS</span><br><span class="line">│       │       │   └── success.png</span><br><span class="line">│       │       ├── CentOS.md</span><br><span class="line">│       │       ├── Git.md</span><br><span class="line">│       │       ├── MongoDB.md</span><br><span class="line">│       │       ├── MySQL.md</span><br><span class="line">│       │       ├── Redis.md</span><br><span class="line">│       │       └── Tomcat.md</span><br><span class="line">│       ├── Hexo</span><br><span class="line">│       │   ├── 安装</span><br><span class="line">│       │   │   ├── img-20180627184245526.png</span><br><span class="line">│       │   │   ├── img-20180627190554905.png</span><br><span class="line">│       │   │   └── img-20180627190808193.png</span><br><span class="line">│       │   ├── 安装.md</span><br><span class="line">│       │   ├── 主题开发</span><br><span class="line">│       │   │   ├── img-20180627190808193.png</span><br><span class="line">│       │   │   ├── img-20190611175811781.png</span><br><span class="line">│       │   │   ├── img-20190611180317902.png</span><br><span class="line">│       │   │   ├── img-20190611180729426.png</span><br><span class="line">│       │   │   ├── img-20190611181023821.png</span><br><span class="line">│       │   │   ├── img-20190611210222968.png</span><br><span class="line">│       │   │   ├── img-20190611212914872.png</span><br><span class="line">│       │   │   ├── img-20190611213529727.png</span><br><span class="line">│       │   │   ├── img-20190611214947308.png</span><br><span class="line">│       │   │   └── 布局.png</span><br><span class="line">│       │   └── 主题开发.md</span><br><span class="line">│       └── test-hello-world.md</span><br><span class="line">└── themes</span><br><span class="line">    ├── landscape</span><br><span class="line">    └── wiki</span><br><span class="line">        ├── _config.yml</span><br><span class="line">        ├── layout</span><br><span class="line">        │   ├── aside.ejs   // 用于侧边栏</span><br><span class="line">        │   ├── index.ejs   // 用于主页</span><br><span class="line">        │   ├── layout.ejs  // 用于布局</span><br><span class="line">        │   ├── nav.ejs     // 用于导航</span><br><span class="line">        │   └── post.ejs    // 用于文章</span><br><span class="line">        └── <span class="built_in">source</span></span><br><span class="line">            ├── css</span><br><span class="line">            │   └── main.css</span><br><span class="line">            ├── js</span><br><span class="line">            │   └── main.js</span><br><span class="line">            └── lib</span><br></pre></td></tr></table></figure>


<h3 id="主题配置文件"><a href="#主题配置文件" class="headerlink" title="主题配置文件"></a>主题配置文件</h3><p>在 theme._config.yml 配置文件中，添加自己主题的标题，用于 layout.ejs 的引用。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">IT</span> <span class="string">Abyss</span> <span class="string">Wiki</span></span><br><span class="line"></span><br><span class="line"><span class="attr">author:</span> <span class="string">猴子请来的救兵</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menus:</span> </span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about</span></span><br><span class="line"></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="string">博客园:</span> <span class="string">https://www.cnblogs.com/yyhh/</span></span><br><span class="line">  <span class="attr">github:</span> <span class="string">https://github.com</span></span><br></pre></td></tr></table></figure>


<h3 id="设计主布局文件"><a href="#设计主布局文件" class="headerlink" title="设计主布局文件"></a>设计主布局文件</h3><p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%- theme.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入配置文件 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;css/main.css&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入侧边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span> <span class="attr">id</span>=<span class="string">&quot;#aside&quot;</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;aside.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;nav.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入正文 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      &lt;%- body %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 js 文件 --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;js/main.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>订制 css 样式表中的测试样式，添加几个测试的颜色，便于观察布局。</p>
<p>『css/main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 全局 #################### */</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">aside</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#262a30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#b9e1b1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#content</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f9f7ed</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #################### 全局 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152053346-1194447699.png" alt="img"></p>
<h3 id="添加导航栏"><a href="#添加导航栏" class="headerlink" title="添加导航栏"></a>添加导航栏</h3><p>将刚刚配置文件里面加的导航给列出来</p>
<p>『nav.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 内部链接本页面直接跳转 --&gt;</span></span><br><span class="line">    &lt;% for ( menu in theme.menus ) &#123; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;menu-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- theme.menus[menu] %&gt;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;menu-item-link&quot;</span>&gt;</span>&lt;%- menu %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 外部链接打开新的窗口跳转 --&gt;</span></span><br><span class="line">    &lt;% for ( link in theme.links ) &#123; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;menu-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- theme.links[link] %&gt;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;menu-item-link&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>&lt;%- link %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加 css 美化</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 导航 #################### */</span></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-id">#menu</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #################### 导航 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152059991-2070598653.png" alt="img"></p>
<h3 id="添加侧边栏"><a href="#添加侧边栏" class="headerlink" title="添加侧边栏"></a>添加侧边栏</h3><p>想要一个有树状结构的侧边栏，然后给目录、文件、以及搜索框增加图标，需要外部的图片库 。</p>
<p>我的用的图片库是『<a target="_blank" rel="noopener" href="http://fontawesome.dashgame.com/">Font Awesome</a>』。下载好了，放到 source/lib 中。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">themes/wiki/</span><br><span class="line">├── _config.yml</span><br><span class="line">├── layout</span><br><span class="line">│   ├── aside.ejs</span><br><span class="line">│   ├── index.ejs</span><br><span class="line">│   ├── layout.ejs</span><br><span class="line">│   ├── nav.ejs</span><br><span class="line">│   └── post.ejs</span><br><span class="line">└── <span class="built_in">source</span></span><br><span class="line">    ├── css</span><br><span class="line">    │   └── main.css</span><br><span class="line">    ├── js</span><br><span class="line">    │   └── main.js</span><br><span class="line">    └── lib</span><br><span class="line">        └── font-awesome // 下载好的文字图片库</span><br><span class="line">            ├── css</span><br><span class="line">            ├── fonts</span><br><span class="line">            ├── less</span><br><span class="line">            └── scss</span><br></pre></td></tr></table></figure>
<p>在布局文件中，新增字体图片库的 css 文件引用</p>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%- theme.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入配置文件 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;css/main.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 字体图片库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;lib/font-awesome/css/font-awesome.min.css&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入侧边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;aside.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;nav.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入正文 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;article&quot;</span>&gt;</span></span><br><span class="line">                &lt;%- body %&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 js 文件 --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;js/main.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加侧边栏代码，主要做了路径转树的算法，然后显示树。新增了一个搜索框。</p>
<p>『aside.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搜索栏 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 侧边目录栏 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tree&quot;</span>&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="comment">&lt;!-- 将路径转换成 tree 目录结构 --&gt;</span></span><br><span class="line">        const pathToTree = (input) =&gt; &#123;</span><br><span class="line">            var output = [];</span><br><span class="line">            input.forEach(function(post)&#123;</span><br><span class="line">                <span class="comment">&lt;!-- 用来分割去掉时间的路径 --&gt;</span></span><br><span class="line">                var chain = post.slug.split(&quot;/&quot;);</span><br><span class="line">                var currentNode = output;</span><br><span class="line">                for (var j = 0; j &lt; chain.length; j++) &#123;</span><br><span class="line">                    if (chain[j] === &#x27;&#x27;) &#123;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    var wantedNode = chain[j];</span><br><span class="line">                    var lastNode = currentNode;</span><br><span class="line"></span><br><span class="line">                    for (var k = 0; k &lt; currentNode.length; k++) &#123;</span><br><span class="line">                        if (currentNode[k].title == wantedNode) &#123;</span><br><span class="line">                            currentNode = currentNode[k].children;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    if (lastNode == currentNode) &#123;</span><br><span class="line">                        var newNode = currentNode[k] = &#123; post: post, title: wantedNode, children: [] &#125;;</span><br><span class="line">                        currentNode = newNode.children;</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        delete currentNode.children</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            return output;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- console.log(output) --&gt;</span></span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="comment">&lt;!-- 递归输出侧边栏目录 tree --&gt;</span></span><br><span class="line">        const showTree = (input) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 按 tile ascii 排序 --&gt;</span></span><br><span class="line">            input.sort(function(a, b)&#123;</span><br><span class="line">                var len = a.title.length &gt; b.title.length ? a.title.length : b.title.length;</span><br><span class="line">                for ( var i = 0; i &lt; len; i++ ) &#123;</span><br><span class="line">                    res = a.title[i].charCodeAt() - b.title[i].charCodeAt();</span><br><span class="line">                    if ( res ) &#123; return res &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 循环输出 html 结构 --&gt;</span></span><br><span class="line">            input.forEach(function(node) &#123;</span><br><span class="line">                if ( node.children == 0 ) &#123;</span><br><span class="line"></span><br><span class="line">    %&gt;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;file&lt;%- (is_post() &amp;&amp; node.post._id == page._id) ? &#x27; active&#x27; : &#x27;&#x27; %&gt;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- config.root %&gt;&lt;%- node.post.path %&gt;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-file&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                &lt;%- node.title %&gt;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">    %&gt;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;directory&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;directory&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-folder&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                &lt;%- node.title %&gt;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            &lt;%- showTree(node.children) %&gt;</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        showTree(pathToTree(site.posts))</span><br><span class="line">    %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152124624-1346291648.png" alt="img"></p>
<p>在 main.css 文件中，增加侧边栏美化</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 侧边栏 #################### */</span></span><br><span class="line"><span class="comment">/* 搜索框 */</span></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">290px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#131417</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#87daff</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 搜索图标 */</span></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#search</span> <span class="selector-tag">i</span><span class="selector-class">.fa</span><span class="selector-class">.fa-search</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#757575</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#131417</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">2.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条 */</span></span><br><span class="line"><span class="selector-tag">aside</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 树目录位置 */</span></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#tree</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">55px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 树目录 */</span></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">cursor</span>:pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#tree</span> <span class="selector-class">.active</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#tree</span> <span class="selector-class">.active</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#87daff</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#87daff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#tree</span> <span class="selector-tag">i</span><span class="selector-class">.fa</span> &#123;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* #################### 侧边栏 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152133949-1696507681.png" alt="img"></p>
<h3 id="添加文章"><a href="#添加文章" class="headerlink" title="添加文章"></a>添加文章</h3><p>侧边栏还有搜索功能，和目录折叠功能没实现，这个后面再实现，先把链接里面的内容给搞定，这个时候需要编辑 post.ejs了</p>
<p>『post.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;post-author&quot;</span>&gt;</span>作者: &lt;%- theme.author %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;post-date&quot;</span>&gt;</span>&lt;%- date(page.date, &quot;YYYY-MM-DD HH:mm:ss&quot;) %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;article&quot;</span>&gt;</span></span><br><span class="line">    &lt;%- page.content %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152139056-1986068911.png" alt="img"></p>
<h3 id="图片插件"><a href="#图片插件" class="headerlink" title="图片插件"></a>图片插件</h3><p>可以看到，大致雏形出来了，但是图片都是 404 找不到。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152142489-1373244239.png" alt="img"></p>
<p>查看后，发现图片的路径不对。因为我用 『Typora』进行 md 的编写。里面有个设置就是将图片保存在当前文件名命名的同级目录下。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152146221-900560680.png" alt="img"></p>
<p>因此为了保证 Hexo 的图片与我设置的一致，需要安装一个 NodeJs 插件 『hexo-asset-image』获取文件相对路径下同名文件夹的图片。</p>
<p>返回到 hexo init 的 wiki 目录下进行安装 【<strong>注意: 不是主题的wiki，是根目录wiki</strong>】</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<p>安装好了插件以后，需要在总的配置文件 _config.yml 的第 38 行，将值修改成 true</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取文件相对目录的图片</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>安装好了，重新启动一下 hexo</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wiki ➔  hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20180627190808193.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611175811781.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611180317902.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611180729426.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611181023821.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611210222968.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611212914872.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611213529727.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611214947308.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/%E5%B8%83%E5%B1%80.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20180627190808193.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611175811781.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611180317902.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611180729426.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611181023821.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611210222968.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611212914872.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611213529727.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/img-20190611214947308.png</span><br><span class="line">update link as:--&gt;/2019/06/11/Hexo/主题开发/%E5%B8%83%E5%B1%80.png</span><br><span class="line">update link as:--&gt;/2018/06/27/Hexo/安装/img-20180627190808193.png</span><br><span class="line">update link as:--&gt;/2018/06/27/Hexo/安装/img-20180627190808193.png</span><br><span class="line">update link as:--&gt;/2018/01/17/Docker/镜像部署/CentOS/success.png</span><br><span class="line">update link as:--&gt;/2018/01/17/Docker/镜像部署/CentOS/success.png</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>看日志，发现他已经在更新我的图片了，看一眼 Blog 图片就已经出来了，不再是 404 了。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152155240-1813969534.png" alt="img"></p>
<p>仔细看文件路径，在我 『主题开发.md』文件的同级，有个名字叫『主题开发』的文件夹，里面存着我引用的图片资源，这样的路径，才能被这个插件给加载出来。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">├── Hexo</span><br><span class="line">│       │   ├── 安装</span><br><span class="line">│       │   │   ├── img-20180627184245526.png</span><br><span class="line">│       │   │   ├── img-20180627190554905.png</span><br><span class="line">│       │   │   └── img-20180627190808193.png</span><br><span class="line">│       │   ├── 安装.md</span><br><span class="line">│       │   ├── 主题开发</span><br><span class="line">│       │   │   ├── img-20180627190808193.png</span><br><span class="line">│       │   │   ├── img-20190611175811781.png</span><br><span class="line">│       │   │   ├── img-20190611180317902.png</span><br><span class="line">│       │   │   ├── img-20190611180729426.png</span><br><span class="line">│       │   │   ├── img-20190611181023821.png</span><br><span class="line">│       │   │   ├── img-20190611210222968.png</span><br><span class="line">│       │   │   ├── img-20190611212914872.png</span><br><span class="line">│       │   │   ├── img-20190611213529727.png</span><br><span class="line">│       │   │   ├── img-20190611214947308.png</span><br><span class="line">│       │   │   └── 布局.png</span><br><span class="line">│       │   └── 主题开发.md</span><br></pre></td></tr></table></figure>


<h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>剩下的就是给文章做 css 美化了，当然，美化一定要代码高亮了。我用的代码高亮是比较流行的 『<a target="_blank" rel="noopener" href="https://highlightjs.org/">highlightjs</a>』下载了其中我非常喜欢的 『<a target="_blank" rel="noopener" href="https://highlightjs.org/download/">atom-one-dark</a>』的主题。如果有自己更喜欢的主题，可以根据自己的喜好进行下载。</p>
<p>跟图片库『font-awesome』一样，也把它放进 source/lib 中</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">themes/wiki/<span class="built_in">source</span>/</span><br><span class="line">├── css</span><br><span class="line">│   └── main.css</span><br><span class="line">├── js</span><br><span class="line">│   └── main.js</span><br><span class="line">└── lib</span><br><span class="line">    ├── font-awesome</span><br><span class="line">    └── highlight</span><br></pre></td></tr></table></figure>
<p>在 『laout.ejs』中，引入它的 css 与 js，引入后，记得让高亮加载</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%- theme.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入配置文件 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;css/main.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 字体图片库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;lib/font-awesome/css/font-awesome.min.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 代码高亮库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;/lib/highlight/styles/atom-one-dark&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入侧边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;aside.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;nav.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入正文 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            &lt;%- body %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 js 文件 --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;js/main.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入代码高亮的 js --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/highlight/highlight.pack.js&#x27;) %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span>hljs.initHighlightingOnLoad();<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152207611-326933918.png" alt="img"></p>
<p>发现代码并没有高亮，找了下原因，原来是默认主题已经是 『highlight』代码高亮了，但是它的这些并不够炫酷，还是选择坚持用我自己下载的，所以我必须得去总配置文件 _config.yml 里面，把它给关闭，大概在 42 行的位置，将这 3 个选项关闭。</p>
<p>『_config.yml』</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure>
<p>修改配置文件以后，得重启 hexo 在重启前，先 hexo clean 以免还有缓存在。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152211753-1928277802.png" alt="img"></p>
<p>代码出现高亮了，现在美化文章，增加 css</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 文章 #################### */</span></span><br><span class="line"><span class="comment">/* 作者 时间 相关 */</span></span><br><span class="line"><span class="selector-id">#post-author</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">9px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post-date</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">9px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章各个元素间隔 */</span></span><br><span class="line"><span class="selector-id">#article</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#article</span> * &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h3</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h4</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h5</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#e06c75</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">3px</span> solid <span class="number">#73b1e0</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#e06c75</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">h1</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">5px</span> <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">8px</span> <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">pre</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 表格处理 */</span></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">50px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">  <span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">5px</span> <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#73b1e0</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(odd)</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#F4F4F4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">td</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#badbf5</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">td</span>, <span class="selector-tag">table</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">20px</span> <span class="number">5px</span> <span class="number">20px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:first-child</span> <span class="selector-tag">th</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:first-child</span> <span class="selector-tag">th</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:last-child</span> <span class="selector-tag">td</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:last-child</span> <span class="selector-tag">td</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* #################### 文章 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152226032-618387805.png" alt="img"></p>
<h3 id="目录点击事件"><a href="#目录点击事件" class="headerlink" title="目录点击事件"></a>目录点击事件</h3><p>到这个时候，就需要编写 js 了。我使用了 jQuery 库，本来不准备用第三方插件了，后面发现，早晚都要用，干脆一开始就使用好了。</p>
<p>下载 <a target="_blank" rel="noopener" href="https://jquery.com/download/">jQuery</a> 库，放到 sorce/lib 中</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">themes/wiki/<span class="built_in">source</span>/</span><br><span class="line">├── css</span><br><span class="line">│   └── main.css</span><br><span class="line">├── js</span><br><span class="line">│   └── main.js</span><br><span class="line">└── lib</span><br><span class="line">    ├── font-awesome</span><br><span class="line">    ├── highlight</span><br><span class="line">    └── jquery-3.4.1.min.js</span><br></pre></td></tr></table></figure>
<p>在 layout.ejs 中引入 jquery 库，这里得注意，要先引用 jquery 再引入自己的 js 代码，否则在编写的时候，找不到 jqeury 库。因为 html 在编译的时候，是从上往下顺序执行的，如果不先引入库文件，在自己的代码中就找不到库文件了。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%- theme.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入配置文件 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;css/main.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 字体图片库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;lib/font-awesome/css/font-awesome.min.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 代码高亮库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;/lib/highlight/styles/atom-one-dark&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入侧边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;aside.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;nav.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入正文 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            &lt;%- body %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入代码高亮的 js --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/highlight/highlight.pack.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 jquery --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/jquery-3.4.1.min.js&#x27;) %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span>hljs.initHighlightingOnLoad();<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 js 文件 --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;js/main.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着就是编写自己的 js 了。代码大致意识，都写在注释里了。</p>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clickTreeDirectory();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击目录事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickTreeDirectory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断有 active 的话，就递归循环把它的父目录打开</span></span><br><span class="line">    <span class="keyword">var</span> treeActive = $(<span class="string">&quot;#tree .active&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> ( treeActive.length ) &#123;</span><br><span class="line">        showActiveTree(treeActive, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击目录，就触发折叠动画效果</span></span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;#tree a[class=&#x27;directory&#x27;]&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 用来清空所有绑定的其他事件</span></span><br><span class="line">        event.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> icon = $(<span class="built_in">this</span>).children(<span class="string">&quot;.fa&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> iconIsOpen = icon.hasClass(<span class="string">&quot;fa-folder-open&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> subTree = $(<span class="built_in">this</span>).siblings(<span class="string">&quot;ul&quot;</span>);</span><br><span class="line"></span><br><span class="line">        icon.removeClass(<span class="string">&quot;fa-folder-open&quot;</span>).removeClass(<span class="string">&quot;fa-folder&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (iconIsOpen) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> subTree != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">                subTree.slideUp(&#123; <span class="attr">duration</span>: <span class="number">100</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            icon.addClass(<span class="string">&quot;fa-folder&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> subTree != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">                subTree.slideDown(&#123; <span class="attr">duration</span>: <span class="number">100</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            icon.addClass(<span class="string">&quot;fa-folder-open&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环递归展开父节点</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showActiveTree</span>(<span class="params">jqNode, isSiblings</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( jqNode.attr(<span class="string">&quot;id&quot;</span>) === <span class="string">&quot;tree&quot;</span>  ) &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span> ( jqNode.is(<span class="string">&quot;ul&quot;</span>) ) &#123;</span><br><span class="line">        jqNode.css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;block&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 这个 isSiblings 是给搜索用的</span></span><br><span class="line">        <span class="comment">// true 就显示开同级兄弟节点</span></span><br><span class="line">        <span class="comment">// false 就是给搜索用的，值需要展示它自己就好了，不展示兄弟节点</span></span><br><span class="line">        <span class="keyword">if</span> ( isSiblings ) &#123; </span><br><span class="line">            jqNode.siblings().css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;block&quot;</span>);</span><br><span class="line">            jqNode.siblings(<span class="string">&quot;a&quot;</span>).css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;inline&quot;</span>);</span><br><span class="line">            jqNode.siblings(<span class="string">&quot;a&quot;</span>).find(<span class="string">&quot;.fa-folder&quot;</span>).removeClass(<span class="string">&quot;fa-folder&quot;</span>).addClass(<span class="string">&quot;fa-folder-open&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    jqNode.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; showActiveTree($(<span class="built_in">this</span>).parent(), isSiblings); &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152246406-1895807719.png" alt="img"></p>
<h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>这个搜索框一开始就设计好了，但是没有什么功能。要是做全文本搜索的话，就需要安装插件了。这里只是简单的在侧边栏的文章目录上进行搜索。在 js 代码中增加以下。</p>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 搜索框输入事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serachTree</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 解决搜索大小写问题</span></span><br><span class="line">    jQuery.expr[<span class="string">&#x27;:&#x27;</span>].contains = <span class="function"><span class="keyword">function</span> (<span class="params">a, i, m</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jQuery(a).text().toUpperCase().indexOf(m[<span class="number">3</span>].toUpperCase()) &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&quot;#search input&quot;</span>).on(<span class="string">&quot;input&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取 inpiut 输入框的内容</span></span><br><span class="line">        <span class="keyword">var</span> inputContent = e.currentTarget.value;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 没值就收起父目录，但是得把 active 的父目录都展开</span></span><br><span class="line">        <span class="keyword">if</span> ( inputContent.length === <span class="number">0</span> ) &#123;</span><br><span class="line">            $(<span class="string">&quot;.fa-folder-open&quot;</span>).removeClass(<span class="string">&quot;fa-folder-open&quot;</span>).addClass(<span class="string">&quot;fa-folder&quot;</span>);</span><br><span class="line">            $(<span class="string">&quot;#tree ul&quot;</span>).css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;none&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> ( $(<span class="string">&quot;#tree .active&quot;</span>).length ) &#123;</span><br><span class="line">                showActiveTree($(<span class="string">&quot;#tree .active&quot;</span>), <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                $(<span class="string">&quot;#tree&quot;</span>).children().css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;block&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 有值就搜索，并且展开父目录</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">&quot;.fa-folder&quot;</span>).removeClass(<span class="string">&quot;fa-folder&quot;</span>).addClass(<span class="string">&quot;fa-folder-open&quot;</span>);</span><br><span class="line">            $(<span class="string">&quot;#tree ul&quot;</span>).css(<span class="string">&quot;display&quot;</span>, <span class="string">&quot;none&quot;</span>);</span><br><span class="line">            <span class="keyword">var</span> searchResult = $(<span class="string">&quot;#tree li&quot;</span>).find(<span class="string">&quot;a:contains(&#x27;&quot;</span> + inputContent + <span class="string">&quot;&#x27;)&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> ( searchResult.length ) &#123; </span><br><span class="line">                showActiveTree(searchResult.parent(), <span class="literal">false</span>) </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152258672-542006097.png" alt="img"></p>
<h3 id="局部刷新"><a href="#局部刷新" class="headerlink" title="局部刷新"></a>局部刷新</h3><p>发现搜索出来东西以后，点击搜索的连接，页面会闪一下，然后我的树状结构目录就变了，作为测试的我，这种 bug 不能忍呀。琢磨了很久，想到可以使用 ajax 做局部刷新。就是刷新下图中的局部区域。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152302464-1857683603.png" alt="img"></p>
<p>网上搜索以后，发现已经有现成的东西了它叫做 『 <a target="_blank" rel="noopener" href="https://github.com/defunkt/jquery-pjax">pjax</a> 』，下载后放进 source/lib 中，在布局中引用，在 js 里新增逻辑。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">themes/wiki/<span class="built_in">source</span>/</span><br><span class="line">├── css</span><br><span class="line">│   └── main.css</span><br><span class="line">├── js</span><br><span class="line">│   └── main.js</span><br><span class="line">└── lib</span><br><span class="line">    ├── font-awesome</span><br><span class="line">    ├── highlight</span><br><span class="line">    ├── jquery-3.4.1.min.js</span><br><span class="line">    └── jquery.pjax.js</span><br></pre></td></tr></table></figure>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%- theme.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入配置文件 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;css/main.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 字体图片库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;lib/font-awesome/css/font-awesome.min.css&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 代码高亮库 --&gt;</span></span><br><span class="line">    &lt;%- css(&#x27;/lib/highlight/styles/atom-one-dark&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入侧边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;aside.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            &lt;%- include(&#x27;nav.ejs&#x27;) %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入正文 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            &lt;%- body %&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入代码高亮的 js --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/highlight/highlight.pack.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 jquery --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/jquery-3.4.1.min.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入 pjax --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;/lib/jquery.pjax.js&#x27;) %&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 引入 js 文件 --&gt;</span></span><br><span class="line">    &lt;%- js(&#x27;js/main.js&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clickTreeDirectory();</span><br><span class="line">    serachTree();</span><br><span class="line">    pjaxLoad();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pjaxLoad</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="built_in">document</span>).pjax(<span class="string">&#x27;#tree a&#x27;</span>, <span class="string">&#x27;#content&#x27;</span>, &#123;<span class="attr">fragment</span>:<span class="string">&#x27;#content&#x27;</span>, <span class="attr">timeout</span>:<span class="number">8000</span>&#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).pjax(<span class="string">&#x27;#menu a&#x27;</span>, <span class="string">&#x27;#content&#x27;</span>, &#123;<span class="attr">fragment</span>:<span class="string">&#x27;#content&#x27;</span>, <span class="attr">timeout</span>:<span class="number">8000</span>&#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).on(&#123;</span><br><span class="line">        <span class="string">&quot;pjax:complete&quot;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">&quot;pre code&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">i, block</span>)</span>&#123;</span><br><span class="line">                hljs.highlightBlock(block);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 添加 active</span></span><br><span class="line">            $(<span class="string">&quot;#tree .active&quot;</span>).removeClass(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">            e.relatedTarget.parentNode.classList.add(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="文章索引目录"><a href="#文章索引目录" class="headerlink" title="文章索引目录"></a>文章索引目录</h3><p>文章的索引目录，可以根据文章的 h1 h2 h3 标签，把他们给弄出来，然后分级自动生成目录。</p>
<p>首先在 aside.ejs 做一个存放目录的 div，先试试目录好不好用。</p>
<p>『aside.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- 最尾部添加，这里就不列以前的代码了 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;toc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我想在我点击目录链接的时候，文章滑动至我想看的位置，并且在文章滑动过的位置，导航都标记已读的状态。加入 js 代码。先丢进 aside 的 toc 中测试一下。</p>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    hljs.initHighlightingOnLoad();</span><br><span class="line">    clickTreeDirectory();</span><br><span class="line">    serachTree();</span><br><span class="line">    pjaxLoad();</span><br><span class="line">    showArticleIndex();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showArticleIndex</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 先刷一遍文章有哪些节点，把 h1 h2 h3 加入列表，等下循环进行处理。</span></span><br><span class="line">    <span class="comment">// 如果不够，可以加上 h4 ,只是我个人觉得，前 3 个就够了，出现第 4 层就目录就太长了，太细节了。</span></span><br><span class="line">    <span class="keyword">var</span> h1List = h2List = h3List = [];</span><br><span class="line">    <span class="keyword">var</span> labelList = $(<span class="string">&quot;#article&quot;</span>).children();</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i=<span class="number">0</span>; i&lt;labelList.length; i++ ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ( $(labelList[i]).is(<span class="string">&quot;h1&quot;</span>) ) &#123;</span><br><span class="line">            h2List = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">            h1List.push(&#123;<span class="attr">node</span>: $(labelList[i]), <span class="attr">id</span>: i, <span class="attr">children</span>: h2List&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( $(labelList[i]).is(<span class="string">&quot;h2&quot;</span>) ) &#123;</span><br><span class="line">            h3List = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">            h2List.push(&#123;<span class="attr">node</span>: $(labelList[i]), <span class="attr">id</span>: i, <span class="attr">children</span>: h3List&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( $(labelList[i]).is(<span class="string">&quot;h3&quot;</span>) ) &#123;</span><br><span class="line">            h3List.push(&#123;<span class="attr">node</span>: $(labelList[i]), <span class="attr">id</span>: i, <span class="attr">children</span>: []&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 闭包递归，返回树状 html 格式的文章目录索引</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">tocList</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> content = <span class="string">&quot;&lt;ul&gt;&quot;</span>;</span><br><span class="line">        tocList.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">toc</span>) </span>&#123;</span><br><span class="line">            toc.node.before(<span class="string">&#x27;&lt;span class=&quot;anchor&quot; id=&quot;_label&#x27;</span>+toc.id+<span class="string">&#x27;&quot;&gt;&lt;/span&gt;&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> ( toc.children == <span class="number">0</span> ) &#123;</span><br><span class="line">                content += <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;#_label&#x27;</span>+toc.id+<span class="string">&#x27;&quot;&gt;&#x27;</span>+toc.node.text()+<span class="string">&#x27;&lt;/a&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                content += <span class="string">&#x27;&lt;li&gt;&lt;a href=&quot;#_label&#x27;</span>+toc.id+<span class="string">&#x27;&quot;&gt;&#x27;</span>+toc.node.text()+<span class="string">&#x27;&lt;/a&gt;&#x27;</span>+show(toc.children)+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        content += <span class="string">&quot;&lt;/ul&gt;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 最后组合成 div 方便 css 设计样式，添加到指定位置</span></span><br><span class="line">    $(<span class="string">&quot;aside #toc&quot;</span>).empty();</span><br><span class="line">    $(<span class="string">&quot;aside #toc&quot;</span>).append(show(h1List));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击目录索引链接，动画跳转过去，不是默认闪现过去</span></span><br><span class="line">    $(<span class="string">&quot;#toc a&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 获取当前点击的 a 标签，并前触发滚动动画往对应的位置</span></span><br><span class="line">        <span class="keyword">var</span> target = $(<span class="built_in">this</span>.hash);</span><br><span class="line">        $(<span class="string">&quot;body, html&quot;</span>).animate(</span><br><span class="line">            &#123;<span class="string">&#x27;scrollTop&#x27;</span>: target.offset().top&#125;,</span><br><span class="line">            <span class="number">500</span></span><br><span class="line">        );</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听浏览器滚动条，当浏览过的标签，给他上色。</span></span><br><span class="line">    $(<span class="built_in">window</span>).on(<span class="string">&quot;scroll&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> anchorList = $(<span class="string">&quot;.anchor&quot;</span>);</span><br><span class="line">        anchorList.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> tocLink = $(<span class="string">&#x27;#toc a[href=&quot;#&#x27;</span>+$(<span class="built_in">this</span>).attr(<span class="string">&quot;id&quot;</span>)+<span class="string">&#x27;&quot;]&#x27;</span>);</span><br><span class="line">            <span class="keyword">var</span> anchorTop = $(<span class="built_in">this</span>).offset().top;</span><br><span class="line">            <span class="keyword">var</span> windowTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">            <span class="keyword">if</span> ( anchorTop &lt;= windowTop+<span class="number">50</span> ) &#123;</span><br><span class="line">                tocLink.addClass(<span class="string">&quot;read&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                tocLink.removeClass(<span class="string">&quot;read&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新增 css 样式，用来支撑滚动已读状态的。</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 文章索引 #################### */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#toc</span> <span class="selector-tag">a</span><span class="selector-class">.read</span>&#123;</span><br><span class="line">    <span class="comment">/*color: #e06c75;*/</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#87daff</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">    <span class="attribute">-o-transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#toc</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: <span class="number">0.2s</span>;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: <span class="number">0.2s</span>;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: <span class="number">0.2s</span>;</span><br><span class="line">    <span class="attribute">-o-transition</span>: <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#toc</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="comment">/*color: #87daff;*/</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#e5c07b</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">    <span class="attribute">-moz-transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">    <span class="attribute">-ms-transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">    <span class="attribute">-o-transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* #################### 文章索引 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152343097-1318795664.png" alt="img"></p>
<p>本来想着 wiki 这种不需要文章目录索引的。但是万一文章真的很长呢？好歹得有个目录吧，还是有个目录方便点。初期布局的时候，就没有想过目录要放哪，这下尴尬了。放在这个位置吧，还是有点丑，想点办法把这个目录优化一下，想着左上方的搜索图标没啥用，换成按钮好了，当点击时，分别切换文章索引目录，与树目录。</p>
<p>修改 aside.ejs ，把这个搜索图标，加个 id</p>
<p>『aside.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搜索栏 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改如下</p>
<p>『aside.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搜索栏 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">id</span>=<span class="string">&quot;search-icon&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-bars&quot;</span> <span class="attr">title</span>=<span class="string">&quot;切换目录与索引&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后给它实现 js 事件。</p>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    hljs.initHighlightingOnLoad();</span><br><span class="line">    clickTreeDirectory();</span><br><span class="line">    serachTree();</span><br><span class="line">    pjaxLoad();</span><br><span class="line">    showArticleIndex();</span><br><span class="line">    switchTreeOrIndex();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击搜索旁的按钮，切换目录与索引</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">switchTreeOrIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">&quot;#search-icon&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        $(<span class="string">&quot;#tree&quot;</span>).animate(&#123;<span class="attr">height</span>:<span class="string">&#x27;toggle&#x27;</span>&#125;,<span class="number">0</span>);</span><br><span class="line">        $(<span class="string">&quot;#toc&quot;</span>).animate(&#123;<span class="attr">height</span>:<span class="string">&#x27;toggle&#x27;</span>&#125;,<span class="number">0</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改 css 给图标加上一个选中状态，大概 70 行的位置，以前是对 i 标签进行设置的，现在换成 id ，并且对它的 hover 选中状态进行变色。</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 搜索图标 */</span></span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#search</span> <span class="selector-id">#search-icon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#131417</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">2.5</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-id">#search</span> <span class="selector-id">#search-icon</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#87daff</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-o-user-select</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152355866-1709605003.png" alt="img"></p>
<p>好了，现在点击这个图标，就会切换目录或者索引了。就是图标选的不太好，可以选中把图标换掉。如果想要更多的图标，可以去『<a target="_blank" rel="noopener" href="http://fontawesome.dashgame.com/#new">Font Awesome</a>』找喜欢的。</p>
<p>『aside.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搜索栏 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">id</span>=<span class="string">&quot;search-icon&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-bars&quot;</span> <span class="attr">title</span>=<span class="string">&quot;切换目录与索引&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152401652-1836957731.png" alt="img"></p>
<h3 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h3><p>其实主页可以直接引用最喜欢的 md 文件，就是主页了。后面的关于是直接引用的，为了本文每块都不一样，我这里把 wiki 文章列一下，形成一个全局文章浏览好了。如果你的文章特别的多，这种方式很影响网络带宽的，如果网络不是足够的大，很容易造成卡顿。</p>
<p>『index.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;articleList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &lt;% site.posts.forEach(function(post)&#123; %&gt;</span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;article-li&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;article-date&quot;</span>&gt;</span>&lt;%- date(post.date, &quot;YYYY-MM-DD&quot;) %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;article-read&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- config.root %&gt;&lt;%- post.path %&gt;&quot;</span>&gt;</span> 阅读全文 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;article-title&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- config.root %&gt;&lt;%- post.path %&gt;&quot;</span>&gt;</span>&lt;%- post.slug.split(&quot;/&quot;)[post.slug.split(&quot;/&quot;).length-1] %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-digest&quot;</span>&gt;</span></span><br><span class="line">                    &lt;%- post.more.replace(/&lt;\/?.+?\/?&gt;/g, &quot;&quot;).substring(0, 100) %&gt;</span><br><span class="line">                    ...</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        &lt;% &#125;); %&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>美化样式</p>
<p>『css.main』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 主页 #################### */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-li</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">8px</span> <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-digest</span> * &#123;</span><br><span class="line">    <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">cursor</span>:auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: none;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-digest</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-date</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e06c75</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f9f7ed</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-read</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e06c75</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f9f7ed</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#articleList</span> <span class="selector-class">.article-title</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* #################### 主页 #################### */</span></span><br></pre></td></tr></table></figure>
<p>添加 pjax，在 pjaxLoad 中，增加一个主页的。</p>
<p>『main.js』</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pjaxLoad</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="built_in">document</span>).pjax(<span class="string">&#x27;#tree a&#x27;</span>, <span class="string">&#x27;#content&#x27;</span>, &#123;<span class="attr">fragment</span>:<span class="string">&#x27;#content&#x27;</span>, <span class="attr">timeout</span>:<span class="number">8000</span>&#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).pjax(<span class="string">&#x27;#menu a&#x27;</span>, <span class="string">&#x27;#content&#x27;</span>, &#123;<span class="attr">fragment</span>:<span class="string">&#x27;#content&#x27;</span>, <span class="attr">timeout</span>:<span class="number">8000</span>&#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).pjax(<span class="string">&#x27;#articleList a&#x27;</span>, <span class="string">&#x27;#content&#x27;</span>, &#123;<span class="attr">fragment</span>:<span class="string">&#x27;#content&#x27;</span>, <span class="attr">timeout</span>:<span class="number">8000</span>&#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).on(&#123;</span><br><span class="line">        <span class="string">&quot;pjax:complete&quot;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">&quot;pre code&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">i, block</span>)</span>&#123;</span><br><span class="line">                hljs.highlightBlock(block);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 添加 active</span></span><br><span class="line">            $(<span class="string">&quot;#tree .active&quot;</span>).removeClass(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">            e.relatedTarget.parentNode.classList.add(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">            showArticleIndex();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152424403-1735811392.png" alt="img"></p>
<p>主页设计就这样了，其实主页可以很花哨、炫酷的。可以把自己最自豪的作品展示在这里。ejs 是支持 html 编码的，所以完全可以在 ejs 中写入自己的项目。</p>
<h3 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h3><p>关于就是个人相关的信息，直接引入 md 就好了。在 Hexo 存放 md 的 _post 同级目录，新建 about 目录，同时在这个目录下，新建一个 index.md，在里面随便写几句话测试好了。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wiki ➔  tree -L 3</span><br><span class="line">├── _config.yml</span><br><span class="line">├── db.json</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">│   ├── _posts</span><br><span class="line">│   │   ├── Docker</span><br><span class="line">│   │   ├── Hexo</span><br><span class="line">│   │   └── test-hello-world.md</span><br><span class="line">│   ├── about</span><br><span class="line">│   │   └── index.md</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>


<h3 id="动漫妹纸挂件"><a href="#动漫妹纸挂件" class="headerlink" title="动漫妹纸挂件"></a>动漫妹纸挂件</h3><p>在 layout.ejs 下，追加以下代码，就有挂件。这个挂件很消耗 cpu 性能，谨慎使用。</p>
<p>『layout.ejs』</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://blog-static.cnblogs.com/files/yyhh/L2Dwidget.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line">L2Dwidget.init();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>挂件出来了之后，看 html 源码中，出现了一个新的 canvas 强制修改它的位置和边框。</p>
<p>『main.css』</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">canvas</span><span class="selector-id">#live2dcanvas</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152431177-793954369.png" alt="img"></p>
<h3 id="手机端自适应"><a href="#手机端自适应" class="headerlink" title="手机端自适应"></a>手机端自适应</h3><p>在 css 中设置，当浏览器窗口小于 800px 时并且处于手机竖屏状态，隐藏侧边栏，留给手机端足够的空间进行文字浏览</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* #################### 自适应 #################### */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">800px</span>) &#123;</span><br><span class="line">	<span class="selector-tag">aside</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="selector-id">#content</span> &#123;</span><br><span class="line">		<span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="selector-tag">canvas</span><span class="selector-id">#live2dcanvas</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*竖屏*/</span></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (orientation : portrait) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="selector-tag">aside</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="selector-id">#content</span> &#123;</span><br><span class="line">		<span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="selector-tag">canvas</span><span class="selector-id">#live2dcanvas</span> &#123;</span><br><span class="line">		<span class="attribute">display</span>: none;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* #################### 自适应 #################### */</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/626593/201907/626593-20190702134235874-1718772387.png" alt="img"></p>
<p>手机端查看一眼。</p>
<p>『竖屏』</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201907/626593-20190702140920397-377231933.png" alt="img"></p>
<p>『横屏』</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201907/626593-20190702141006243-357520206.png" alt="img"></p>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p>写好的文章是可以部署自己的云服务器上的，如果没有自己的也可以部署到 github 的 gitpage 上的。这边先介绍怎么部署到 Nginx 上。</p>
<p>我这有一台 Linux 服务器</p>
<table>
<thead>
<tr>
<th align="left">服务器</th>
<th align="left">ip</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CentOS</td>
<td align="left">192.168.0.100</td>
</tr>
</tbody></table>
<p>先安装好 Nginx</p>
<p>Nginx安装环境</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install gcc -y</span><br><span class="line">yum install pcre pcre-devel -y</span><br><span class="line">yum install zlib zlib-devel -y</span><br></pre></td></tr></table></figure>
<p>下载</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.16.0.tar.gz</span><br><span class="line">tar zxvf nginx-1.16.0.tar.gz</span><br><span class="line">cd nginx-1.16.0</span><br></pre></td></tr></table></figure>
<p>编译</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx </span><br></pre></td></tr></table></figure>
<p>安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>启动 nginx</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F; </span><br><span class="line">.&#x2F;nginx </span><br></pre></td></tr></table></figure>
<p>访问 nginx 看是否已经可以正常浏览</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152438960-1763195370.png" alt="img"></p>
<p>关于这方面的部署，可以参照官方文档 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/deployment#SFTP">SFTP 部署</a></p>
<p>首先得在 hexo 目录下安装 sftp 插件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-sftp --save</span><br></pre></td></tr></table></figure>
<p>然后在 _config.yml 中配置 deploy</p>
<p>『_config.yml』</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&quot;sftp&quot;</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">&quot;192.168.0.100&quot;</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">&quot;root&quot;</span></span><br><span class="line">  <span class="attr">pass:</span> <span class="string">&quot;123456&quot;</span></span><br><span class="line">  <span class="attr">remotePath:</span> <span class="string">&quot;/usr/local/nginx/html&quot;</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>
<p>先生成文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded in 459 ms</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: archives&#x2F;index.html</span><br><span class="line">INFO  Generated: about&#x2F;index.html</span><br><span class="line">INFO  Generated: archives&#x2F;2018&#x2F;01&#x2F;index.html</span><br><span class="line">INFO  Generated: archives&#x2F;2019&#x2F;06&#x2F;index.html</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>再进行部署</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d</span><br><span class="line"></span><br><span class="line">INFO  Deploying: sftp</span><br><span class="line">* Deploying to host localhost</span><br><span class="line">* local dir  &#x3D; &#x2F;Users&#x2F;Yuki&#x2F;Documents&#x2F;wiki&#x2F;public</span><br><span class="line">* remote dir &#x3D; &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;html</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>好了，访问看看。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152445675-1039792030.png" alt="img"></p>
<h3 id="github-page"><a href="#github-page" class="headerlink" title="github page"></a>github page</h3><p>部署到 github 下的 github page 里，这个是免费的，不需要有自己的云服务，唯一的缺点，就是国外的网速有点慢，还好 github 没有被墙。</p>
<p>首先新建一个仓库</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152449527-1404367424.png" alt="img"></p>
<p>新建一个开头以你的账户命名的 yourname.github.io 的仓库</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201907/626593-20190701183852400-1231785179.png" alt="img"></p>
<p>复制你的 git 地址。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152456226-147202675.png" alt="img"></p>
<p>往下翻，修改它的 gitpage 位置，可以看到它的提示已经变了，并且给你了 gitpage 的地址。</p>
<p><img src="https://img2018.cnblogs.com/blog/626593/201906/626593-20190620152459629-1043491338.png" alt="img"></p>
<p>同样跟刚才部署 nginx 一样，可以参照官文档 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/deployment#Git">Git 部署</a></p>
<p>先添加 git 插件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>然后在 _config.yml 中配置 deploy，这个就是你刚才复制的仓库地址。</p>
<p>『_config.yml』</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&quot;git&quot;</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&quot;https://github.com/ITAbyss/itabyss.github.io.git&quot;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">&quot;master&quot;</span></span><br></pre></td></tr></table></figure>
<p>先生成文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded in 459 ms</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: archives&#x2F;index.html</span><br><span class="line">INFO  Generated: about&#x2F;index.html</span><br><span class="line">INFO  Generated: archives&#x2F;2018&#x2F;01&#x2F;index.html</span><br><span class="line">INFO  Generated: archives&#x2F;2019&#x2F;06&#x2F;index.html</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>再进行部署</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d</span><br><span class="line"></span><br><span class="line">NFO  Deploying: git</span><br><span class="line">INFO  Setting up Git deployment...</span><br><span class="line">Initialized empty Git repository in &#x2F;Users&#x2F;Yuki&#x2F;Documents&#x2F;wiki&#x2F;.deploy_git&#x2F;.git&#x2F;</span><br><span class="line">[master (root-commit) 17350e4] First commit</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 placeholder</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">[master 9251e9f] Site updated: 2019-06-19 19:19:57</span><br><span class="line"> 179 files changed, 28176 insertions(+)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>


<h2 id="记得去掉布局测试颜色"><a href="#记得去掉布局测试颜色" class="headerlink" title="记得去掉布局测试颜色"></a>记得去掉布局测试颜色</h2>
                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2021/01/29/红队资料集锦/" data-toggle="tooltip" data-placement="top"
                           title="红队资料集锦">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2021/01/29/《水调歌头·黄州快哉亭赠张偓佺》/" data-toggle="tooltip" data-placement="top"
                           title="《水调歌头·黄州快哉亭赠张偓佺》">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--加入新的评论系统-->
                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hexo-%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91"><span class="toc-text">Hexo 主题开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E7%AB%A0"><span class="toc-text">序章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA-Blog"><span class="toc-text">新建 Blog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E4%B8%8B%E8%BD%BD"><span class="toc-text">主题下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91"><span class="toc-text">主题开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D"><span class="toc-text">模块介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EJS-%E6%A0%87%E7%AD%BE"><span class="toc-text">EJS 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hexo-%E5%8F%98%E9%87%8F"><span class="toc-text">Hexo 变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%88%B6%E4%BD%9C"><span class="toc-text">主题制作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E5%B8%83%E5%B1%80"><span class="toc-text">主题布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">文件结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">主题配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E4%B8%BB%E5%B8%83%E5%B1%80%E6%96%87%E4%BB%B6"><span class="toc-text">设计主布局文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-text">添加导航栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%A7%E8%BE%B9%E6%A0%8F"><span class="toc-text">添加侧边栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0"><span class="toc-text">添加文章</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E6%8F%92%E4%BB%B6"><span class="toc-text">图片插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE"><span class="toc-text">代码高亮</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="toc-text">目录点击事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2"><span class="toc-text">搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%88%B7%E6%96%B0"><span class="toc-text">局部刷新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%B4%A2%E5%BC%95%E7%9B%AE%E5%BD%95"><span class="toc-text">文章索引目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5"><span class="toc-text">主页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E"><span class="toc-text">关于</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%BC%AB%E5%A6%B9%E7%BA%B8%E6%8C%82%E4%BB%B6"><span class="toc-text">动漫妹纸挂件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BA%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94"><span class="toc-text">手机端自适应</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2"><span class="toc-text">部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx"><span class="toc-text">Nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#github-page"><span class="toc-text">github page</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%B0%E5%BE%97%E5%8E%BB%E6%8E%89%E5%B8%83%E5%B1%80%E6%B5%8B%E8%AF%95%E9%A2%9C%E8%89%B2"><span class="toc-text">记得去掉布局测试颜色</span></a></li></ol></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#Hexo"
                           title="Hexo">Hexo</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/Rune93495707">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/rune-9">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/lRuneSpacel">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/lRune">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; RuneSpace 2021
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://lrune.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','','2.0.0');
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="https://tuchuang-1302726019.cos.ap-nanjing.myqcloud.com/tuchaung/%E5%A4%B4%E5%83%8F%E8%AE%BE%E8%AE%A1-%E5%A2%A8%E9%95%9C.png">
</body>

</html>
